{% extends 'base.html' %}

{% block title %}{{ product.name }} - healthoperator Shop{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-10">

        <div class="card mb-4 shadow-sm">
            <div class="row g-0 align-items-center mb-3">
                <div class="col-md-5">

                    {% if product.image %}
                    <img src="{{ product.image.url }}" class="img-fluid rounded-start" alt="{{ product.name }}"
                        style="height: 300px; width: auto; max-width: 90%; margin: 0 auto; display: block;">

                    {% endif %}
                </div>

                <div class="col-md-7">
                    <div class="card-body p-3">
                        <h1 class="card-title">{{ product.name }}</h1>
                        <p class="text-muted mb-2">
                            Category:
                            {% if product.category %}
                            <a href="{% url 'shop:product_by_category' product.category.slug %}"
                                class="text-decoration-none text-primary">{{ product.category.name }}</a>
                            {% else %}
                            Uncategorized
                            {% endif %}
                        </p>

                        {% if product.price %}
                        <h2 class="text-success mb-3">{{ product.price }}</h2>
                        {% else %}
                        <h2 class="text-muted mb-3">Price not specified</h2>
                        {% endif %}

                        {% if product.buy_link %}
                        <a href="{{ product.buy_link }}" class="btn btn-success btn-lg" target="_blank">Buy Now</a>

                        {% else %}
                        <button class="btn btn-warning btn-lg" disabled>Currently Unavailable</button>
                        {% endif %}
                    </div>
                </div>
            </div>

            {# Full width description below both columns #}
            <div class="card-body pt-0">
                <hr>
                <div class="card-text" style="overflow-wrap: break-word;">
                    {{ product.description|safe }}
                </div>
            </div>

            <div class="card-body pt-3">
                <a href="{% url 'shop:product_list' %}" class="btn btn-secondary">Back to Shop</a>
            </div>
        </div>

    </div>
</div>
{% endblock %}